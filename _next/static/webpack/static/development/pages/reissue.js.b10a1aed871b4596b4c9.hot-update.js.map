{"version":3,"file":"static/webpack/static/development/pages/reissue.js.b10a1aed871b4596b4c9.hot-update.js","sources":["webpack:///./components/form/form.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { IndexState, QueryState, IStudent, ReissueState } from '../../constant';\nimport { cardToStudentID, queryApi } from '../../utils';\nimport { useRouter } from 'next/router';\n\nconst fakedata: IStudent = {\n  name: 'AAA',\n  birth: 'BBB',\n  major: 'CCC',\n  other: 'DDD',\n  apply: 'EEE',\n};\n\ninterface IProps {\n  dispatch: React.Dispatch<\n    React.SetStateAction<IndexState | QueryState | ReissueState>\n  >;\n  onSuccess: (user: IStudent | boolean) => void;\n}\n\nconst Form: React.FC<IProps> = (props: IProps) => {\n  const alertMessage = '學生資料錯誤，請重新輸入';\n  const [eng, setEng] = useState(false);\n  const [alert, setAlert] = useState(false);\n  const [inputText, setInputText] = useState('');\n\n  const { pathname } = useRouter();\n\n  const handleSubmit = async (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    if (pathname === '/query') {\n      try {\n        const sourceID = await cardToStudentID(inputText);\n        const d = await queryApi(sourceID);\n        if (d.error_msg) {\n          setAlert(true);\n        } else {\n          onSuccess(d.applied);\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    } else {\n      const isReissue = pathname === '/reissue';\n\n      // trigger different api\n      const result = true;\n      if (result) {\n        props.onSuccess(fakedata);\n        props.dispatch(isReissue ? ReissueState.READY : IndexState.READY);\n      } else {\n        props.dispatch(isReissue ? ReissueState.FAILURE : IndexState.FAILURE);\n      }\n    }\n  };\n\n  const handleChange = (event: React.FormEvent<HTMLInputElement>) => {\n    event.preventDefault();\n    setInputText(event.currentTarget.value);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        <div className=\"selector\">\n          <a\n            className={eng ? 'selected' : 'default'}\n            onClick={() => setEng(!eng)}\n          >\n            中文\n          </a>\n          <a\n            className={!eng ? 'selected' : 'default'}\n            onClick={() => setEng(!eng)}\n          >\n            英文\n          </a>\n        </div>\n        <div className=\"alert\">{alert ? alertMessage : ''}</div>\n      </label>\n\n      <label>\n        <input onChange={handleChange} type=\"text\" placeholder=\"學生證號碼\" />\n        <div style={{ height: '80px', width: '100%' }} />\n      </label>\n\n      <label>\n        <button type=\"submit\">確認 CONFIRM</button>\n        <div>\n          <div\n            className=\"circle\"\n            style={!eng ? { backgroundColor: '#707070' } : {}}\n          />\n          <div\n            className=\"circle\"\n            style={eng ? { backgroundColor: '#707070' } : {}}\n          />\n        </div>\n      </label>\n\n      <style jsx>{`\n        form {\n          width: 100%;\n          height: 75%;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          flex-direction: column;\n          padding: 20px 0px 20px 0px;\n          border-radius: 0px 0px 20px 20px;\n        }\n        label {\n          width: 100%;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          flex-direction: column;\n        }\n        input {\n          border-top: 0px;\n          border-left: 0px;\n          border-right: 0px;\n          border-bottom: 2px solid rgba(186, 184, 184, 0.66);\n          background-color: transparent;\n          width: 70%;\n          font-size: 25px;\n          line-height: 1.2;\n          color: #707070;\n        }\n        input::placeholder {\n          font-size: 25px;\n          color: rgba(186, 184, 184, 0.66);\n        }\n        button {\n          width: 70%;\n          font-size: 23px;\n          border-radius: 31px;\n          background-color: #4781e6;\n          line-height: 1.22;\n          letter-spacing: 0.05px;\n          text-align: center;\n          color: rgba(247, 247, 247, 0.92);\n          padding: 8px 0px 8px 0px;\n          border: 0px;\n        }\n        .circle {\n          width: 15px;\n          height: 15px;\n          border-radius: 50%;\n          border: 1px solid #707070;\n          display: inline-block;\n          margin: 20px 12px 20px 12px;\n        }\n        .alert {\n          color: rgba(236, 35, 35, 0.92);\n          font-family: EdwardianScriptITC;\n          font-size: 25px;\n          height: 36px;\n        }\n        .selector {\n          font-size: 33px;\n          -webkit-text-stroke: 1px #676464;\n          font-family: SegoeUI;\n          color: #676464;\n          text-align: center;\n          margin-top: 25px;\n        }\n        .selector > a {\n          margin: 0px 15px 0px 15px;\n        }\n        .selected {\n          opacity: 0.35;\n        }\n        .default {\n          opacity: 1;\n        }\n      `}</style>\n    </form>\n  );\n};\n\nexport default Form;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAcA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAIA;AAJA;AAAA;AACA;AADA;AAKA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;AACA;AADA;AAAA;AAAA;AAYA;AACA;AAbA;AAAA;AAAA;AACA;AADA;AAeA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA/BA;AAAA;AAAA;AAqHA;AACA;AACA;;;;A","sourceRoot":""}